<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strinova Release Estimation</title>
    <meta content="Strinova Release Date Estimation" property="og:title">
    <meta content="Strinova should release Dec 18 - Dec 29 based on current estimates." property="og:description">
    <meta content="https://strinova-release-tracker.hutao.rip" property="og:url">
    <meta content="strinova-logo-small.webp" property="og:image">
    <link rel="icon" href="/strinova-logo-small.webp">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@^2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@^1"></script>
</head>

<body>
    <header class="container">
        <div class="stack" style="--stacks: 3;">
            <span style="--index: 0;">Strinova</span>
            <span style="--index: 1;">Strinova</span>
            <span style="--index: 2;">Strinova</span>
        </div>
        <h1>Release Tracker</h1>
        <p>Since most games will release after hitting their preregistration milestones, I built this website in order
            to estimate the rough release date based on preregistration data.</p>
        <p>Strinova should release <ins id="startDate"></ins> - <ins id="endDate"></ins> based on current estimates.</p>
    </header>
    <main class="container">
        <canvas id="stats" style="width: 100vw; height: 100vh"></canvas>
    </main>
    <footer class="container">
        <small><p>Preregister for <a href="https://www.strinova.com/?lang=en-US">Strinova</a></p></small>
    </footer>
    <script>
        const preregistrationData = [
            { x: "2024-11-05T12:00:00", y: 4159408 },
            { x: "2024-11-06T08:30:00", y: 4196753 },
            { x: "2024-11-06T15:15:00", y: 4215075 },
            { x: "2024-11-07T10:00:00", y: 4241848 },
            { x: "2024-11-07T12:00:00", y: 4245477 },
            { x: "2024-11-07T14:00:00", y: 4249335 },
            { x: "2024-11-07T19:00:00", y: 4258512 },
            { x: "2024-11-07T20:42:02", y: 4261876 },
            { x: "2024-11-07T21:06:15", y: 4263717 },
            { x: "2024-11-07T22:06:38", y: 4265465 },
            { x: "2024-11-07T23:07:00", y: 4267351 },
            { x: "2024-11-08T08:08:45", y: 4284167 },
            { x: "2024-11-08T09:09:07", y: 4285882 },
            { x: "2024-11-08T10:09:29", y: 4287868 },
            { x: "2024-11-08T11:09:52", y: 4289860 },
            { x: "2024-11-08T12:10:15", y: 4291822 },
            { x: "2024-11-08T13:10:36", y: 4293880 },
            { x: "2024-11-08T14:00:54", y: 4295575 },
            { x: "2024-11-08T15:01:16", y: 4297537 },
            { x: "2024-11-08T16:10:16", y: 4299561 },
            { x: "2024-11-08T17:10:38", y: 4301424 },
            { x: "2024-11-08T18:11:01", y: 4303421 },
            { x: "2024-11-08T19:01:20", y: 4305225 },
            { x: "2024-11-08T20:01:42", y: 4307075 },
            { x: "2024-11-08T21:02:05", y: 4308928 },
            { x: "2024-11-08T22:02:27", y: 4310607 },
            { x: "2024-11-08T23:02:50", y: 4312351 },
            { x: "2024-11-09T00:03:13", y: 4314392 },
            { x: "2024-11-09T01:03:36", y: 4316159 },
            { x: "2024-11-09T02:04:00", y: 4318067 },
            { x: "2024-11-09T03:04:22", y: 4321593 },
            { x: "2024-11-09T04:04:45", y: 4323561 },
            { x: "2024-11-09T05:05:07", y: 4327155 },
            { x: "2024-11-09T07:05:52", y: 4328863 },
            { x: "2024-11-09T08:06:15", y: 4330874 },
            { x: "2024-11-09T09:06:37", y: 4332548 },
            { x: "2024-11-09T11:04:08", y: 4334463 },
            { x: "2024-11-09T12:04:29", y: 4336305 },
            { x: "2024-11-09T13:04:50", y: 4338218 },
            { x: "2024-11-09T14:05:11", y: 4340283 },
            { x: "2024-11-09T15:05:33", y: 4342043 },
            { x: "2024-11-09T16:05:55", y: 4344001 },
            { x: "2024-11-09T17:11:17", y: 4346080 },
            { x: "2024-11-09T18:01:36", y: 4347920 },
            { x: "2024-11-09T19:01:58", y: 4349823 },
            { x: "2024-11-09T20:02:20", y: 4351821 },
            { x: "2024-11-09T21:02:43", y: 4353610 },
            { x: "2024-11-09T22:03:05", y: 4355354 },
            { x: "2024-11-09T23:03:26", y: 4357091 },
            { x: "2024-11-10T00:03:48", y: 4359067 },
            { x: "2024-11-10T01:04:11", y: 4360753 },
            { x: "2024-11-10T02:04:34", y: 4362517 },
            { x: "2024-11-10T03:04:57", y: 4364194 },
            { x: "2024-11-10T04:05:19", y: 4365908 },
            { x: "2024-11-10T05:05:42", y: 4367660 },
            { x: "2024-11-10T06:06:04", y: 4369442 },
            { x: "2024-11-10T07:06:26", y: 4371504 },
            { x: "2024-11-10T08:06:49", y: 4373275 },
            { x: "2024-11-10T09:07:12", y: 4375256 },
            { x: "2024-11-10T10:07:34", y: 4377310 },
            { x: "2024-11-10T11:07:57", y: 4379143 },
            { x: "2024-11-10T13:08:40", y: 4380914 },
            { x: "2024-11-10T14:09:03", y: 4382945 },
            { x: "2024-11-10T16:09:48", y: 4384835 },
            { x: "2024-11-10T17:10:10", y: 4386533 },
            { x: "2024-11-10T18:10:33", y: 4388580 },
            { x: "2024-11-10T19:00:52", y: 4390551 },
            { x: "2024-11-10T21:01:36", y: 4392473 },
            { x: "2024-11-11T01:03:06", y: 4394529 },
            { x: "2024-11-11T02:03:29", y: 4398072 },
            { x: "2024-11-11T06:04:58", y: 4401562 },
            { x: "2024-11-11T09:06:05", y: 4405195 },
            { x: "2024-11-11T10:06:28", y: 4408790 },
            { x: "2024-11-11T11:06:50", y: 4412881 },
            { x: "2024-11-11T12:07:12", y: 4414870 },
            { x: "2024-11-11T13:07:35", y: 4416644 },
            { x: "2024-11-11T14:07:55", y: 4420378 },
            { x: "2024-11-11T18:09:25", y: 4422242 },
            { x: "2024-11-11T19:09:48", y: 4424148 },
            { x: "2024-11-11T20:10:11", y: 4426211 },
            { x: "2024-11-11T21:00:30", y: 4428118 },
            { x: "2024-11-12T00:01:38", y: 4431907 },
            { x: "2024-11-12T02:02:25", y: 4435827 },
            { x: "2024-11-12T03:02:48", y: 4439776 },
            { x: "2024-11-12T04:03:11", y: 4441629 },
            { x: "2024-11-12T06:03:56", y: 4445238 },
            { x: "2024-11-12T07:04:18", y: 4448934 },
            { x: "2024-11-12T09:05:03", y: 4452441 },
            { x: "2024-11-12T10:05:26", y: 4454160 },
            { x: "2024-11-12T11:05:49", y: 4456139 },
            { x: "2024-11-12T12:06:11", y: 4458118 },
            { x: "2024-11-12T13:06:33", y: 4459841 },
            { x: "2024-11-12T14:06:53", y: 4461868 },
            { x: "2024-11-12T15:07:16", y: 4463627 },
            { x: "2024-11-12T16:07:39", y: 4465621 },
            { x: "2024-11-12T17:08:02", y: 4467537 },
            { x: "2024-11-12T18:08:25", y: 4469431 },
            { x: "2024-11-12T19:08:47", y: 4471502 },
            { x: "2024-11-12T20:09:08", y: 4473562 },
            { x: "2024-11-12T21:09:30", y: 4475299 },
            { x: "2024-11-12T22:03:42", y: 4477216 },
            { x: "2024-11-12T23:04:05", y: 4479182 },
            { x: "2024-11-13T00:04:28", y: 4481105 },
            { x: "2024-11-13T01:04:50", y: 4483024 },
            { x: "2024-11-13T02:05:13", y: 4484844 },
            { x: "2024-11-13T03:05:35", y: 4486526 },
            { x: "2024-11-13T04:05:58", y: 4488523 },
            { x: "2024-11-13T05:06:20", y: 4490281 },
            { x: "2024-11-13T06:06:43", y: 4491999 },
            { x: "2024-11-13T07:07:06", y: 4493838 },
            { x: "2024-11-13T08:07:29", y: 4495606 },
            { x: "2024-11-13T09:07:51", y: 4497298 },
            { x: "2024-11-13T10:08:14", y: 4499115 },
            { x: "2024-11-13T11:08:36", y: 4500810 },
            { x: "2024-11-13T12:08:59", y: 4502857 },
            { x: "2024-11-13T13:09:21", y: 4504882 },
            { x: "2024-11-13T14:09:44", y: 4506767 },
            { x: "2024-11-13T15:10:04", y: 4508592 },
            { x: "2024-11-13T16:10:27", y: 4510632 },
            { x: "2024-11-13T17:00:45", y: 4512579 },
            { x: "2024-11-13T18:01:08", y: 4514386 },
            { x: "2024-11-13T19:11:34", y: 4516204 },
        ]

        function convertToMilliseconds(data) {
            return data.map(point => ({
                x: new Date(point.x).getTime(),
                y: point.y
            }));
        }
        function calculateTrendline(data) {
            const n = data.length;
            let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;

            data.forEach(point => {
                sumX += point.x;
                sumY += point.y;
                sumXY += point.x * point.y;
                sumX2 += point.x * point.x;
            });

            const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const intercept = (sumY - slope * sumX) / n;

            return { slope, intercept };
        }

        const numericalData = convertToMilliseconds(preregistrationData);
        const trendline = calculateTrendline(numericalData);
        const trendlineEndDate = new Date("2024-12-31T12:00:00").getTime();

        function getTrendlinePoints(data, trendline, endDate) {
            const xValues = data.map(point => point.x);
            const minX = Math.min(...xValues);
            const maxX = Math.max(...xValues);

            const startY = trendline.slope * minX + trendline.intercept;
            const endY = trendline.slope * endDate + trendline.intercept;

            return [
                { x: new Date(minX).toISOString(), y: startY },
                { x: new Date(endDate).toISOString(), y: endY }
            ];
        }
        const trendlinePoints = getTrendlinePoints(numericalData, trendline, trendlineEndDate);

        const releaseStartX = (6000000 - trendline.intercept) / trendline.slope;
        const releaseEndX = (6500000 - trendline.intercept) / trendline.slope;

        const startDate = new Date(releaseStartX);
        const endDate = new Date(releaseEndX);

        const options = { month: "short", day: "numeric" };

        const formattedStartDate = startDate.toLocaleDateString("en-US", options);
        const formattedEndDate = endDate.toLocaleDateString("en-US", options);

        document.getElementById("startDate").textContent = formattedStartDate;
        document.getElementById("endDate").textContent = formattedEndDate;

        const ctx = document.getElementById("stats").getContext("2d");
        Chart.defaults.color = "rgba(180, 180, 180)";
        const statChart = new Chart(ctx, {
            type: "scatter",
            data: {
                datasets: [
                    {
                        label: "Preregistrations",
                        data: preregistrationData,
                        backgroundColor: "rgba(75, 192, 192, 1)",
                        borderColor: "rgba(75, 192, 192, 0.5)",
                        color: "#FFF",
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        tension: 0.4
                    },
                    {
                        label: "Prediction",
                        data: trendlinePoints,
                        type: "line",
                        fill: false,
                        borderColor: "rgba(75, 192, 192, 0.5)",
                        borderWidth: 2,
                        pointRadius: 0,
                        borderDash: [5, 5]
                    },
                    {
                        label: "Release Date Range",
                        type: "bar",
                        data: [
                            { x: releaseStartX, y: 6000000 },
                            { x: releaseEndX, y: 6500000 },
                        ],
                        maxBarThickness: 1,
                        backgroundColor: "rgba(75, 192, 192, 1)"
                    }
                ]
            },
            options: {
                scales: {
                    x: {
                        type: "time",
                        position: "bottom",
                        title: {
                            display: true,
                            text: "Date"
                        },
                        max: "2024-12-31T12:00:00",
                        grid: {
                            color: "rgba(50, 50, 50, 0)"
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: "Preregistrations"
                        },
                        max: 7000000,
                        grid: {
                            color: "rgba(50, 50, 50, 0.5)"
                        }
                    }
                },
                plugins: {
                    customCanvasBackgroundColor: {
                        color: "rgba(0, 191, 255, 0.2)", // Highlight color
                        yRange: [6000000, 6500000], // Y-axis range to highlight
                        labelText: "Release Likely", // Text label for the highlighted area
                        labelColor: "white", // Color for the text label
                        labelFont: "bold 13px Arial" // Font style for the text label
                    }
                },
                responsive: true,
            },
            plugins: [{
                id: "customCanvasBackgroundColor",
                beforeDraw: (chart, args, options) => {
                    const { ctx, chartArea: { left, right, top, bottom }, scales: { y } } = chart;
                    const yStart = y.getPixelForValue(options.yRange[0]);
                    const yEnd = y.getPixelForValue(options.yRange[1]);

                    // Draw the highlighted background
                    ctx.save();
                    ctx.fillStyle = options.color;
                    ctx.fillRect(left, yEnd, right - left, yStart - yEnd);

                    // Add the text label
                    ctx.fillStyle = options.labelColor;
                    ctx.font = options.labelFont;
                    ctx.textAlign = "center";
                    ctx.textBaseline = "middle";
                    ctx.fillText(
                        options.labelText,
                        left + (right - left) / 2, // X position: center of the highlighted area
                        yEnd + (yStart - yEnd) / 2 // Y position: center of the highlighted area
                    );
                    ctx.restore();
                }
            }]
        });
    </script>
</body>

</html>